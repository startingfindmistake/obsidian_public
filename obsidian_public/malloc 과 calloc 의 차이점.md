## `malloc`과 `calloc`: C언어 동적 메모리 할당의 핵심

C언어에서 `malloc`과 `calloc`은 [[프로그램]]을 실행하는 도중에 필요한 만큼 메모리를 할당받아 사용할 수 있도록 하는 **동적 메모리 할당(Dynamic Memory Allocation)** 함수입니다. 이는 프로그램이 실행되는 상황에 따라 유연하게 메모리 크기를 조절할 수 있게 해주는 중요한 기능입니다.

### 왜 동적 메모리 할당을 사용할까요?

* **유연한 메모리 관리**: 프로그램 실행 중 필요한 메모리 양이 변동될 때 유용합니다. 예를 들어, 사용자 입력에 따라 배열의 크기를 정하거나, 처리할 데이터의 양이 가변적일 때 효과적으로 메모리를 사용할 수 있습니다.
* **데이터 구조 구현**: 크기가 정해져 있지 않은 연결 리스트(Linked List), 트리(Tree) 등의 복잡한 데이터 구조를 만들 때 필수적입니다. 각 구성 요소(노드)가 필요할 때마다 동적으로 생성됩니다.
* **큰 메모리 공간 사용**: 프로그램의 일반 변수가 저장되는 스택(stack) 영역보다 훨씬 큰 힙(heap) 영역에 메모리를 할당받을 수 있어, 대용량 데이터를 다룰 수 있습니다.

---

### `malloc` (Memory Allocation)

`malloc` 함수는 **M**emory **Alloc**ation의 약자로, 지정된 바이트(byte) 크기만큼의 메모리 블록을 할당합니다.

* **함수 형태**: `void* malloc(size_t size);`
    * `size`: 할당받고자 하는 메모리의 총 크기를 바이트 단위로 전달합니다. `size_t`는 보통 부호 없는 정수형입니다.
* **반환 값**:
    * **성공 시**: 할당된 메모리 블록의 시작 주소를 `void*` (어떤 특정 타입도 지정되지 않은 범용 포인터) 타입으로 반환합니다. 이 포인터는 실제 사용할 데이터 타입의 포인터로 형 변환(casting)하여 사용해야 합니다.
    * **실패 시**: 메모리 할당에 실패하면 (예: 시스템에 가용 메모리가 부족한 경우) `NULL` 포인터를 반환합니다.
* **주요 특징**:
    * **초기화 없음**: `malloc`으로 할당된 메모리 공간은 **초기화되지 않습니다.** 즉, 할당된 메모리에는 이전에 사용되었던 의미 없는 값(쓰레기 값, garbage value)이 그대로 남아 있을 수 있습니다. 따라서 사용하기 전에 반드시 원하는 값으로 초기화하는 과정이 필요합니다.

#### `malloc` 사용 예시 (C 코드)

```c
#include <stdio.h>
#include <stdlib.h> // malloc, free 함수를 사용하기 위해 필요

int main() {
    int n = 5;
    int* ptr;

    // int형 데이터 n개를 저장할 메모리 공간 할당
    // sizeof(int) * n 바이트만큼 요청
    ptr = (int*)malloc(n * sizeof(int));

    // 메모리 할당 성공 여부 확인
    if (ptr == NULL) {
        fprintf(stderr, "malloc: 메모리 할당 실패\n");
        return 1; // 오류 발생 시 프로그램 종료
    }

    printf("malloc으로 메모리 할당 성공!\n");

    // 할당된 메모리 사용 (초기화 필요)
    for (int i = 0; i < n; i++) {
        ptr[i] = i + 1; // 직접 초기화
        printf("ptr[%d] = %d\n", i, ptr[i]);
    }

    // 할당된 메모리 해제
    free(ptr);
    ptr = NULL; // 선택 사항: 해제된 포인터를 NULL로 설정 (댕글링 포인터 방지)

    return 0;
}
```
